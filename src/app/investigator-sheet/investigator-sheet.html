@if (investigator != null) {
  <div class="sheet">
    <!-- Header row: 2/5 + 3/5 -->
    <div class="row">
      <div class="col-2">
        <div class="row-title">Investigator</div>
      </div>
      <div class="col-3">
        <div class="row-title">Characteristics</div>
      </div>
    </div>

    <!-- Main info row: left 2/5 card, right 3/5 stats grid (3 per row) -->
    <div class="row">
      <div class="col-2">
        <mat-card appearance="outlined">
          <mat-card-content>
            <p>Name: {{ investigator.name }}</p>
            <p>Occupation: {{ investigator.occupation }}</p>
            <p>Age: {{ investigator.age }}</p>
            <p>Pronouns: {{ investigator.pronouns }}</p>
            <p>Residence: {{ investigator.residence }}</p>
            <p>Birthplace: {{ investigator.birthplace }}</p>
          </mat-card-content>
        </mat-card>
      </div>
      <div class="col-3">
        <div class="row stats-grid">
          @for (stat of [
            investigator.strength,
            investigator.constitution,
            investigator.size,
            investigator.dexterity,
            investigator.appearance,
            investigator.intelligence,
            investigator.power,
            investigator.education
          ]; track stat.name) {
            <div class="third">
              <mat-card>
                <mat-card-title>{{ stat.name }}</mat-card-title>
                <mat-card-content>
                  {{ stat.regular }}/{{ stat.half }}/{{ stat.fifth }}
                </mat-card-content>
              </mat-card>
            </div>
          }
          <div class="third">
            <mat-card>
              <mat-card-title>Move Rate</mat-card-title>
              <mat-card-content>
                {{ investigator.movementRate }}
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </div>
    </div>

    <!-- Row of five equal tiles -->
    <div class="row">
      <div class="fifth">
        <mat-card>
          <mat-card-title>Hit Points ({{ investigator.hitPoints.current }} / {{ investigator.hitPoints.max }})</mat-card-title>
          <mat-card-footer>
            <mat-chip-set>
              @if(investigator.majorWound){<mat-chip>Major Wound</mat-chip>}
              @if(investigator.unconscious){<mat-chip>Unconscious</mat-chip>}
              @if(investigator.dying){<mat-chip>Dying</mat-chip>}
            </mat-chip-set>
          </mat-card-footer>
        </mat-card>
      </div>
      <div class="fifth">
        <mat-card>
          <mat-card-title>Sanity ({{ investigator.sanity.current }} / {{ investigator.sanity.max }}) Starting: {{ investigator.sanity.starting }}</mat-card-title>
          <mat-card-footer>
            <mat-chip-set>
              @if(investigator.temporaryInsanity){<mat-chip>Temporary Insanity</mat-chip>}
              @if(investigator.indefiniteInsanity){<mat-chip>Indefinite Insanity</mat-chip>}
            </mat-chip-set>
          </mat-card-footer>
        </mat-card>
      </div>
      <div class="fifth"></div>
      <div class="fifth">
        <mat-card>
          <mat-card-title>Magic Points ({{ investigator.magicPoints.current }} / {{ investigator.magicPoints.max }})</mat-card-title>
        </mat-card>
      </div>
      <div class="fifth">
        <mat-card>
          <mat-card-title>Luck</mat-card-title>
          <mat-card-content>
            Current: {{ investigator.luck.current }} <br> Starting: {{ investigator.luck.starting }}
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Skills (4/5) + Combat (1/5) -->
    <div class="row">
      <div class="col-4">
        <mat-card>
          <mat-card-title>Skills</mat-card-title>
          <mat-card-content>
            <div class="skills-grid">
              @for (skill of investigator.skills; track skill.name) {
                <div class="skills-item">
                  {{ skill.name }} ({{ skill.baseValue }}%): {{ skill.regular }}/{{ skill.half }}/{{ skill.fifth }}
                </div>
              }
            </div>
          </mat-card-content>
        </mat-card>
      </div>
      <div class="col-1">
        <mat-card>
          <mat-card-title>Combat</mat-card-title>
          <mat-card-content>
            <p>Build: {{ investigator.build }}</p>
            <p>Damage Bonus: {{ investigator.damageBonus }}</p>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Gear (2/5) + Notes (2/5) + Wealth (1/5) -->
    <div class="row">
      <div class="col-2">
        <mat-card>
          <mat-card-title>Gear and Weapons</mat-card-title>
        </mat-card>
      </div>
      <div class="col-2">
        <mat-card>
          <mat-card-title>Notes</mat-card-title>
        </mat-card>
      </div>
      <div class="col-1">
        <mat-card>
          <mat-card-title>Wealth</mat-card-title>
          <mat-card-content>
            Cash: ${{ investigator.wealth.cash }} <br>
            Spending Level: ${{ investigator.wealth.spendingLevel }} <br>
            Assets: {{ investigator.wealth.assets }}
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>
} @else {
  <div style="padding: 16px;">
    No investigator loaded. Use the navbar upload to import a sheet.
    <br>
    Or one of the following options
    <br><br>
    <button matButton="filled" routerLink="/create">Create New Investigator</button>
    <button matButton="filled" (click)="loadDefaultInvestigator()">Load Default Investigator</button>
  </div>
}

<app-dice></app-dice>